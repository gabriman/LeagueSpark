var app=angular.module("leaguespark",[]);app.controller("leagueSparkController",["$scope","$summoner","$api","$ddragon",function(a,b,c,d){a.region="euw",a.apikey="",a.loading=!1,a.changeRegion=function(){c.setRegion(a.region),d.setRegion(a.region)},a.changeApiKey=function(){c.setApiKey(a.apikey)},a.search=function(){a.summonerName&&(a.loading=!0,a.loaded={},a.summoner=b.get(a.summonerName,function(){a.loaded.summoner=!0,a.getStats(),a.getLeague(),a.getGameHistory(),a.getMasteries(),a.getRunes()}))},a.getStats=function(){a.summoner.stats=b.getStats(a.summoner.id,function(){a.loaded.stats=!0})},a.getLeague=function(){a.summoner.league=b.getLeague(a.summoner.id,function(){a.loaded.league=!0})},a.getGameHistory=function(){a.summoner.games=b.getGameHistory(a.summoner.id,function(){a.loaded.history=!0})},a.getMasteries=function(){a.summoner.masteries=b.getMasteries(a.summoner.id,function(){a.loaded.masteries=!0})},a.getRunes=function(){a.summoner.runes=b.getRunes(a.summoner.id,function(){a.loaded.runes=!0})},a.isLoaded=function(){return a.loaded?a.loaded.summoner&&a.loaded.stats&&a.loaded.league&&a.loaded.history&&a.loaded.masteries&&a.loaded.runes:!1}}]),app.directive("freeChampRotation",["$http",function(a){var b="https://prod.api.pvp.net/api/lol/euw/v1.1/champion?freeToPlay=true&api_key=f54b64a6-7ad9-436a-aaed-e3e250e8630a";return{templateUrl:"championRotation/championRotation.html",link:function(c){a.get(b).then(function(a){c.champions=angular.fromJson(a.data).champions})}}}]),app.directive("matchHistory",function(){return{scope:{games:"="},templateUrl:"matchHistory/matchHistory.html"}}),app.factory("$api",["$http",function(a){"use strict";function b(){e="https://prod.api.pvp.net/api/lol/"+d+"/v1.1/",f="https://prod.api.pvp.net/api/"+d+"/v2.1/"}var c,d,e,f;return d="euw",b(),{getv11:function(b){return a.get(e+b+"?api_key="+c).then(function(a){return angular.fromJson(a.data)})},getv21:function(b){return a.get(f+b+"?api_key="+c).then(function(a){return angular.fromJson(a.data)})},setRegion:function(a){d=a,b()},setApiKey:function(a){c=a}}}]),app.factory("championsData",["$ddragon",function(a){"use strict";var b,c;return c={},a.getLocalized("champion.json").then(function(a){var d;b=a.data;for(d in b)b.hasOwnProperty(d)&&(c[b[d].key]=b[d])}),{nameFromRaw:function(a){return b&&b[a]?b[a].name:a},nameFromId:function(a){return c&&c[a]?c[a].name:a},rawNameFromId:function(a){return c&&c[a]?c[a].id:a}}}]),app.factory("$ddragon",["$http",function(a){"use strict";function b(){h="http://ddragon.leagueoflegends.com/cdn/"+g+"/",i=h+"data/"+e+"/"}function c(){f="realms/"+d+".json",a.get(f).then(function(a){g=angular.fromJson(a.data).v,b()})}var d,e,f,g,h,i;return d="euw",e="en_US",f="realms/"+d+".json",g="3.15.5",b(),c(),{get:function(b){return a.get(h+b).then(function(a){var b=angular.fromJson(a.data);return b})},getLocalized:function(b){return a.get(i+b).then(function(a){var b=angular.fromJson(a.data);return b})},getBaseUrl:function(){return h},setLanguage:function(a){e=a,b()},setRegion:function(a){d=a,c()}}}]),app.filter("prettyChampName",["championsData",function(a){"use strict";return function(b){return a.nameFromRaw(b)}}]),app.filter("ChampNameFromId",["championsData",function(a){"use strict";return function(b){return a.nameFromId(b)}}]),app.filter("RawChampNameFromId",["championsData",function(a){"use strict";return function(b){return a.rawNameFromId(b)}}]),app.directive("champIcon",["$ddragon",function(a){"use strict";return{restrict:"EA",scope:{rawName:"@",width:"@"},template:'<img ng-src="{{baseUrl}}img/champion/{{rawName}}.png" width={{width}}>',link:function(b,c,d){d.width||(d.width=42),b.baseUrl=a.getBaseUrl()}}}]),app.factory("$summoner",["$api",function(a){"use strict";return{get:function(b,c){var d,e={};return d="summoner/by-name/"+b,a.getv11(d).then(function(a){var b;for(b in a)a.hasOwnProperty(b)&&(e[b]=a[b]);c&&c()}),e},getStats:function(b,c){var d,e=[];return d="stats/by-summoner/"+b+"/summary",a.getv11(d).then(function(a){var b,d;for(d=a.playerStatSummaries,b=0;b<d.length;b+=1)e[b]=d[b];c&&c()}),e},getGameHistory:function(b,c){var d,e=[];return d="game/by-summoner/"+b+"/recent",a.getv11(d).then(function(a){var b,d;for(d=a.games,b=0;b<d.length;b+=1)e[b]=d[b];c&&c()}),e},getLeague:function(b,c){var d,e=[];return d="league/by-summoner/"+b,a.getv21(d).then(function(a){var d,f;for(f=a[b],d=0;d<f.length;d+=1)e[d]=f[d];c&&c()}),e},getMasteries:function(b,c){var d,e=[];return d="summoner/"+b+"/masteries",a.getv11(d).then(function(a){var b,d;for(d=a.pages,b=0;b<d.length;b+=1)e[b]=d[b];c&&c()}),e},getRunes:function(b,c){var d,e=[];return d="summoner/"+b+"/runes",a.getv11(d).then(function(a){var b,d;for(d=a.pages,b=0;b<d.length;b+=1)e[b]=d[b];c&&c()}),e}}}]),angular.module("leaguespark").run(["$templateCache",function(a){"use strict";a.put("championRotation/championRotation.html",'<div id=freeChamps><span ng-repeat="champ in champions"><champ-icon raw-name={{champ.name}}></champ-icon></span></div>'),a.put("index.html",'<!doctype html><html ng-app=leaguespark><head><script src=//cdnjs.cloudflare.com/ajax/libs/angular.js/1.2.5/angular.min.js></script><script src=//cdnjs.cloudflare.com/ajax/libs/angular-ui/0.4.0/angular-ui.min.js></script><script src=script.js></script><link rel=stylesheet href=//netdna.bootstrapcdn.com/bootstrap/3.0.3/css/bootstrap.min.css><link rel=stylesheet href=style.css></head><body ng-controller=leagueSparkController><div class=header><h3>LeagueSpark</h3></div><div class=container><div class=row id=summoner-form><form class=form-inline role=form><div class=form-group><label class=sr-only for=summonerName>Summoner name</label><input class=form-control id=summonerName ng-model=summonerName placeholder="Summoner name"></div><div class=form-group><label class=sr-only for=apikey>API Key</label><input class=form-control id=apikey ng-model=apikey ng-change=changeApiKey() placeholder="API Key"></div><div class=form-group><label class=sr-only for=region>Region</label><select class=form-control id=region ng-model=region ng-change=changeRegion()><option value=euw>EUW</option><option value=na>NA</option></select></div><button class="btn btn-default" ng-click=search()>Search</button></form></div></div><div class=container><div class=row id=summoner-info ng-if=loaded.summoner>Id : {{summoner.id}}</div><div class=row id=stats ng-if=loaded.stats>Wins : {{summoner.stats[0].wins}}</div><div class=row id=league ng-if=loaded.league>League : {{summoner.league.name}}</div><div class=row id=games ng-if=loaded.games>History :<div match-history="" games=summoner.games></div></div><div class=row id=masteries ng-if=loaded.masteries><b>Mastery pages :</b><br><span ng-repeat="page in summoner.masteries">{{page.name}}<br></span></div><div class=row id=runes ng-if=loaded.runes><b>Rune pages :</b><br><span ng-repeat="page in summoner.runes">{{page.name}}<br></span></div><div class=row id=loading-box ng-if="loading && !isLoaded()"><p>Loading...</p></div></div><div><br><br><br></div></body></html>'),a.put("matchHistory/matchHistory.html",'<div id=matchHistory><span ng-repeat="game in games"><champ-icon raw-name={{game.championId|RawChampNameFromId}}></champ-icon>{{game.championId|ChampNameFromId}}<br></span></div>')}]);