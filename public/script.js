var app=angular.module("leaguespark",[]);app.controller("leagueSparkController",["$scope","$summoner","$api","$ddragon",function(a,b,c,d){a.region="euw",a.apikey="",a.changeRegion=function(){c.setRegion(a.region),d.setRegion(a.region)},a.changeApiKey=function(){c.setApiKey(a.apikey)},a.search=function(){a.summonerName&&(a.summoner=b.get(a.summonerName,function(){a.getStats(),a.getLeague(),a.getGameHistory(),a.getMasteries(),a.getRunes()}))},a.getStats=function(){a.summoner.stats=b.getStats(a.summoner.id)},a.getLeague=function(){a.summoner.league=b.getLeague(a.summoner.id)},a.getGameHistory=function(){a.summoner.games=b.getGameHistory(a.summoner.id)},a.getMasteries=function(){a.summoner.masteries=b.getMasteries(a.summoner.id)},a.getRunes=function(){a.summoner.runes=b.getRunes(a.summoner.id)}}]),app.directive("freeChampRotation",["$http",function(a){var b="https://prod.api.pvp.net/api/lol/euw/v1.1/champion?freeToPlay=true&api_key=f54b64a6-7ad9-436a-aaed-e3e250e8630a";return{templateUrl:"championRotation/championRotation.html",link:function(c){a.get(b).then(function(a){c.champions=angular.fromJson(a.data).champions})}}}]),app.directive("matchHistory",function(){return{scope:{games:"="},templateUrl:"matchHistory/matchHistory.html"}}),app.factory("$api",["$http",function(a){"use strict";function b(){e="https://prod.api.pvp.net/api/lol/"+d+"/v1.1/",f="https://prod.api.pvp.net/api/"+d+"/v2.1/"}var c,d,e,f;return d="euw",b(),{getv11:function(b){return a.get(e+b+"?api_key="+c).then(function(a){return angular.fromJson(a.data)})},getv21:function(b){return a.get(f+b+"?api_key="+c).then(function(a){return angular.fromJson(a.data)})},setRegion:function(a){d=a,b()},setApiKey:function(a){c=a}}}]),app.factory("championsData",["$ddragon",function(a){"use strict";var b,c;return c={},a.getLocalized("champion.json").then(function(a){var d;b=a.data;for(d in b)b.hasOwnProperty(d)&&(c[b[d].key]=b[d])}),{nameFromRaw:function(a){return b&&b[a]?b[a].name:a},nameFromId:function(a){return c&&c[a]?c[a].name:a},rawNameFromId:function(a){return c&&c[a]?c[a].id:a}}}]),app.factory("$ddragon",["$http",function(a){"use strict";function b(){h="http://ddragon.leagueoflegends.com/cdn/"+g+"/",i=h+"data/"+e+"/"}function c(){f="realms/"+d+".json",a.get(f).then(function(a){g=angular.fromJson(a.data).v,b()})}var d,e,f,g,h,i;return d="euw",e="en_US",f="realms/"+d+".json",g="3.15.5",b(),c(),{get:function(b){return a.get(h+b).then(function(a){var b=angular.fromJson(a.data);return b})},getLocalized:function(b){return a.get(i+b).then(function(a){var b=angular.fromJson(a.data);return b})},getBaseUrl:function(){return h},setLanguage:function(a){e=a,b()},setRegion:function(a){d=a,c()}}}]),app.filter("prettyChampName",["championsData",function(a){"use strict";return function(b){return a.nameFromRaw(b)}}]),app.filter("ChampNameFromId",["championsData",function(a){"use strict";return function(b){return a.nameFromId(b)}}]),app.filter("RawChampNameFromId",["championsData",function(a){"use strict";return function(b){return a.rawNameFromId(b)}}]),app.directive("champIcon",["$ddragon",function(a){"use strict";return{restrict:"EA",scope:{rawName:"@",width:"@"},template:'<img ng-src="{{baseUrl}}img/champion/{{rawName}}.png" width={{width}}>',link:function(b,c,d){d.width||(d.width=42),b.baseUrl=a.getBaseUrl()}}}]),app.factory("$summoner",["$api",function(a){"use strict";return{get:function(b,c){var d,e={};return d="summoner/by-name/"+b,a.getv11(d).then(function(a){var b;for(b in a)a.hasOwnProperty(b)&&(e[b]=a[b]);c&&c()}),e},getStats:function(b,c){var d,e=[];return d="stats/by-summoner/"+b+"/summary",a.getv11(d).then(function(a){var b,d;for(d=a.playerStatSummaries,b=0;b<d.length;b+=1)e[b]=d[b];c&&c()}),e},getGameHistory:function(b,c){var d,e=[];return d="game/by-summoner/"+b+"/recent",a.getv11(d).then(function(a){var b,d;for(d=a.games,b=0;b<d.length;b+=1)e[b]=d[b];c&&c()}),e},getLeague:function(b,c){var d,e=[];return d="league/by-summoner/"+b,a.getv21(d).then(function(a){var d,f;for(f=a[b],d=0;d<f.length;d+=1)e[d]=f[d];c&&c()}),e},getMasteries:function(b,c){var d,e=[];return d="summoner/"+b+"/masteries",a.getv11(d).then(function(a){var b,d;for(d=a.pages,b=0;b<d.length;b+=1)e[b]=d[b];c&&c()}),e},getRunes:function(b,c){var d,e=[];return d="summoner/"+b+"/runes",a.getv11(d).then(function(a){var b,d;for(d=a.pages,b=0;b<d.length;b+=1)e[b]=d[b];c&&c()}),e}}}]),angular.module("leaguespark").run(["$templateCache",function(a){"use strict";a.put("championRotation/championRotation.html",'<div id=freeChamps><span ng-repeat="champ in champions"><champ-icon raw-name={{champ.name}}></champ-icon></span></div>'),a.put("index.html",'<!doctype html><html ng-app=leaguespark><head><script src=http://code.angularjs.org/1.2.5/angular.min.js></script><script src=script.js></script></head><body><div ng-controller=leagueSparkController>Free champs :<br><div free-champ-rotation=""></div>Summoner :<input ng-model=summonerName>API Key :<input ng-model=apikey ng-change=changeApiKey()>Region :<select ng-model=region ng-change=changeRegion()><option value=euw>EUW</option><option value=na>NA</option></select><button ng-click=search()>Search</button><br>Id : {{summoner.id}}<br>Wins : {{summoner.stats[0].wins}}<br>League : {{summoner.league.name}}<br>History :<div match-history="" games=summoner.games></div><b>Mastery pages :</b><br><span ng-repeat="page in summoner.masteries">{{page.name}}<br></span> <b>Rune pages :</b><br><span ng-repeat="page in summoner.runes">{{page.name}}<br></span></div></body></html>'),a.put("matchHistory/matchHistory.html",'<div id=matchHistory><span ng-repeat="game in games"><champ-icon raw-name={{game.championId|RawChampNameFromId}}></champ-icon>{{game.championId|ChampNameFromId}}<br></span></div>')}]);